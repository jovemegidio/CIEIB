<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Notícias da CIEIB - Convenção das Igrejas Evangélicas Interdenominacional do Brasil">
    <title>CIEIB: Notícias</title>
    <link rel="icon" type="image/jpeg" href="/fav.jpg">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

    <!-- Skip to content -->
    <a href="#main-content" class="sr-only sr-only-focusable">Pular para o conteúdo principal</a>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-content">
                <div class="top-bar-left">
                    <span><i class="fas fa-clock"></i> <span data-config="site_horario">Seg a Sex: 09h às 17h</span></span>
                    <span><i class="fas fa-phone"></i> <span data-config="site_telefone">(00) 0000-0000</span></span>
                    <span><i class="fas fa-envelope"></i> <span data-config="site_email">contato@cieib.org.br</span></span>
                </div>
                <div class="top-bar-right" id="topBarSocial">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-dove"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-name">CIEIB</span>
                        <span class="logo-desc">Convenção das Igrejas Evangélicas<br>Interdenominacional do Brasil</span>
                    </div>
                </a>
                <nav class="nav" id="nav" aria-label="Navegação principal">
                    <ul class="nav-list">
                        <li><a href="index.html">Home</a></li>
                        <li class="dropdown">
                            <a href="#">Institucional <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="quem-somos.html">Quem Somos</a></li>
                                <li><a href="diretoria.html">Diretoria</a></li>
                                <li><a href="diretoria.html#presidente">Presidente</a></li>
                                <li><a href="quem-somos.html#estrutura">Conselhos</a></li>
                                <li><a href="quem-somos.html#estrutura">Comissões</a></li>
                                <li><a href="quem-somos.html#estrutura">Órgãos</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#">Convenções <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="index.html#convencoes-section">Convenções Afiliadas</a></li>
                                <li><a href="index.html#eventos">Assembleias Convencionais</a></li>
                                <li><a href="index.html#resolucoes">Resoluções</a></li>
                            </ul>
                        </li>
                        <li><a href="noticias.html" class="active">Notícias</a></li>
                        <li><a href="noticias.html">Mídias</a></li>
                        <li><a href="contato.html">Contato</a></li>
                        <li class="nav-cta"><a href="area-do-ministro.html"><i class="fas fa-user-shield"></i> Área do Ministro</a></li>
                    </ul>
                </nav>
                <button class="mobile-toggle" id="mobileToggle" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main id="main-content">

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Notícias</h1>
            <nav aria-label="Breadcrumb">
                <div class="breadcrumb">
                    <a href="index.html">Home</a>
                    <span>/</span>
                    <span aria-current="page">Notícias</span>
                </div>
            </nav>
        </div>
    </section>

    <!-- Page Content -->
    <section class="page-content">
        <div class="container">
            <div class="news-page-grid" id="noticiasGrid">
                <div style="text-align:center;padding:60px 0;color:#999;">
                    <i class="fas fa-spinner fa-spin" style="font-size:2rem;"></i>
                    <p style="margin-top:12px;">Carregando notícias...</p>
                </div>
            </div>

            <!-- Pagination -->
            <div id="noticiasPagination" style="display: flex; justify-content: center; gap: 8px; margin-top: 50px;"></div>
        </div>
    </section>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col footer-about">
                    <div class="footer-logo">
                        <div class="logo-icon"><i class="fas fa-dove"></i></div>
                        <span>CIEIB</span>
                    </div>
                    <p data-config="footer_sobre">Convenção das Igrejas Evangélicas Interdenominacional do Brasil — promovendo a unidade e o crescimento do evangelho em todo o território nacional.</p>
                    <div class="footer-social" id="footerSocial">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3>Institucional</h3>
                    <ul>
                        <li><a href="quem-somos.html">Quem Somos</a></li>
                        <li><a href="diretoria.html">Diretoria</a></li>
                        <li><a href="diretoria.html#presidente">Presidente</a></li>
                        <li><a href="quem-somos.html#estrutura">Conselhos</a></li>
                        <li><a href="quem-somos.html#estrutura">Comissões</a></li>
                        <li><a href="quem-somos.html#estrutura">Órgãos</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Convenções</h3>
                    <ul>
                        <li><a href="index.html#convencoes-section">Convenções Afiliadas</a></li>
                        <li><a href="index.html#eventos">Assembleias Convencionais</a></li>
                        <li><a href="index.html#resolucoes">Resoluções</a></li>
                        <li><a href="noticias.html">Notícias</a></li>
                        <li><a href="noticias.html">Mídias</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Contato</h3>
                    <ul class="footer-contact">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <span data-config="site_endereco">Rua Exemplo, 1000<br>Bairro Centro<br>CEP 00000-000<br>Cidade - UF</span>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <span data-config="site_telefone">(00) 0000-0000</span>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <span data-config="site_email">contato@cieib.org.br</span>
                        </li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Atendimento</h3>
                    <div class="footer-hours">
                        <p><i class="fas fa-clock"></i> <span data-config="site_horario">Seg a Sex: 09h às 17h</span></p>
                    </div>
                    <a href="contato.html" class="btn btn-outline btn-sm">Fale Conosco</a>
                    <div class="footer-dpo">
                        <a href="lgpd.html">Fale com o DPO</a>
                        <a href="lgpd.html">Política de Privacidade</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <p data-config="footer_copyright">Copyright &copy; CIEIB 2026. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <button class="back-to-top" id="backToTop" aria-label="Voltar ao topo">
        <i class="fas fa-chevron-up"></i>
    </button>
    <a href="https://wa.me/5500000000000" class="whatsapp-float" id="whatsappFloat" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp (abre em nova janela)">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Ícones por categoria
        const categoryIcons = {
            'Institucional': 'fa-newspaper',
            'Social': 'fa-handshake',
            'Educação': 'fa-graduation-cap',
            'Missões': 'fa-globe-americas',
            'Juventude': 'fa-users',
            'Expansão': 'fa-church',
            'Devocional': 'fa-pray',
            'Cultura': 'fa-music',
            'Resolução': 'fa-file-signature',
            'Assembleia': 'fa-landmark'
        };

        let currentPage = 1;
        const perPage = 9;

        async function loadNoticias(page) {
            currentPage = page;
            const grid = document.getElementById('noticiasGrid');
            const pagination = document.getElementById('noticiasPagination');

            try {
                const data = await API.getNoticias(page, perPage);
                const noticias = data.noticias || data;
                const total = data.total || noticias.length;
                const totalPages = Math.ceil(total / perPage);

                if (noticias.length === 0) {
                    grid.innerHTML = '<div style="text-align:center;padding:60px 0;color:#999;"><i class="fas fa-newspaper" style="font-size:2rem;"></i><p style="margin-top:12px;">Nenhuma notícia encontrada.</p></div>';
                    pagination.innerHTML = '';
                    return;
                }

                grid.innerHTML = noticias.map((n, i) => {
                    const icon = categoryIcons[n.categoria] || 'fa-newspaper';
                    const date = new Date(n.data_publicacao).toLocaleDateString('pt-BR');
                    const isFirst = page === 1 && i === 0;
                    return `
                        <div class="noticia-card${isFirst ? ' featured' : ''}">
                            <div class="noticia-image">
                                ${n.imagem_url 
                                    ? `<img src="${n.imagem_url}" alt="${n.titulo}" style="width:100%;height:100%;object-fit:cover;">`
                                    : `<div class="noticia-img-placeholder"><i class="fas ${icon}"></i></div>`
                                }
                                ${n.destaque ? '<span class="noticia-badge">Destaque</span>' : ''}
                            </div>
                            <div class="noticia-content">
                                <div class="noticia-meta">
                                    <span><i class="fas fa-calendar"></i> ${date}</span>
                                    ${n.categoria ? `<span><i class="fas fa-tag"></i> ${n.categoria}</span>` : ''}
                                </div>
                                <h3>${n.titulo}</h3>
                                <p>${n.resumo || (n.conteudo || '').substring(0, 150) + '...'}</p>
                                <a href="#" class="btn-link">Leia mais <i class="fas fa-arrow-right"></i></a>
                            </div>
                        </div>
                    `;
                }).join('');

                // Paginação
                let paginationHtml = '';
                for (let p = 1; p <= totalPages; p++) {
                    const isActive = p === currentPage;
                    paginationHtml += `<a href="#" onclick="loadNoticias(${p});return false;" style="width:42px;height:42px;display:flex;align-items:center;justify-content:center;border-radius:8px;background:${isActive ? 'var(--primary)' : 'var(--light)'};color:${isActive ? 'var(--white)' : 'var(--text)'};font-family:var(--font-primary);font-weight:600;font-size:0.9rem;transition:var(--transition);">${p}</a>`;
                }
                if (currentPage < totalPages) {
                    paginationHtml += `<a href="#" onclick="loadNoticias(${currentPage + 1});return false;" style="width:42px;height:42px;display:flex;align-items:center;justify-content:center;border-radius:8px;background:var(--light);color:var(--text);font-family:var(--font-primary);font-weight:600;font-size:0.9rem;transition:var(--transition);"><i class="fas fa-chevron-right" style="font-size:0.75rem;"></i></a>`;
                }
                pagination.innerHTML = paginationHtml;

            } catch (err) {
                console.error('Erro ao carregar notícias:', err);
                grid.innerHTML = '<div style="text-align:center;padding:60px 0;color:#999;"><i class="fas fa-exclamation-triangle" style="font-size:2rem;color:#e74c3c;"></i><p style="margin-top:12px;">Erro ao carregar notícias. Tente novamente.</p></div>';
            }
        }

        // Carregar ao iniciar
        loadNoticias(1);
    </script>
</body>
</html>
